<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui">

<composite:interface>
    <composite:attribute name="relationshipDefinition" type="cl.minsal.semantikos.model.relationships.RelationshipDefinition" />
    <composite:attribute name="targetDefinition" type="cl.minsal.semantikos.model.Category" />
    <composite:attribute name="target" type="cl.minsal.semantikos.model.ConceptSMTK" />


</composite:interface>

<composite:implementation>

    <p:panel id="panelSMTK"
             widgetVar="panel" style="margin-bottom:20px" >

        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-1">
                <p:outputLabel value="Búsqueda:" for="acSimple"/>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-5">
                <p:autoComplete id="acSimple"/>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">

            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
            </div>
        </div>


        <div class="ui-g">
            <h:form id="form1" >
            <p:dataTable
                    value="#{smtkBean.getConceptSearchForRDId(cc.attrs.relationshipDefinition.id)}" var="concept"
                         rows="3"
                         paginator="true"  dynamic="true"
                    lazy="true"

                         paginatorTemplate=" {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} "
                         emptyMessage="No se han encontrado conceptos con los criterios utilizados">



            <p:column headerText="ID">
                    <h:outputText value="#{concept.id}"/>
                </p:column>

                <p:column headerText="Descripcion">
                    <h:outputText value="#{concept.descriptionFavorite.term}"/>
                </p:column>
                <p:column headerText="Agregar" style="width:60px;text-align: center">
                    <p:commandButton
                            process="@this"
                            action="#{newConceptMBean.addRelationship(cc.attrs.relationshipDefinition,concept)}"
                            update=":#{cc.clientId}:form2:conceptSavetbl"
                            icon="fa fa-plus"
                                     title="Agregar"
                            >
                    </p:commandButton>
                </p:column>

            </p:dataTable>
            </h:form>
        </div>

        <p:spacer></p:spacer>

        <h:form id="form2"  >
            <div class="ui-g">
                <p:dataTable id="conceptSavetbl" value="#{cc.attrs.relationshipDefinition.relationships}" var="rel" >
                    <p:column headerText="ID">
                        <h:outputText value="#{rel.target.id}"/>
                    </p:column>

                    <p:column headerText="Descripción">
                        <h:outputText value="#{rel.target.descriptionFavorite.term}"/>
                    </p:column>

                    <p:column headerText="Orden">

                    </p:column>

                    <p:column headerText="Estado">
                        <h:outputText value="#{rel.target.state}"/>
                    </p:column>
                    <p:column headerText="Eliminar" style="width:60px;text-align: center">
                        <p:commandButton icon="fa fa-trash" title="Eliminar">

                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </div>
        </h:form>

        <p:spacer></p:spacer>

    </p:panel>
</composite:implementation>
</html>
