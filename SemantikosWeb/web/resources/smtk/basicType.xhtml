<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui">

<composite:interface componentType="basicTypeBean">
    <composite:attribute name="relationshipDefinition" type="cl.minsal.semantikos.model.relationships.RelationshipDefinition" />
    <composite:attribute name="multiplicity" type="cl.minsal.semantikos.model.Multiplicity" />
    <composite:attribute name="targetDefinition" type="cl.minsal.semantikos.model.basictypes.BasicTypeDefinition" />
</composite:interface>
<composite:implementation>
    <h:panelGrid rendered="#{cc.attrs.multiplicity.upperBoundary == 1}">
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-2">
                <p:outputLabel for="domainSelect" value="#{cc.attrs.relationshipDefinition.name}"/>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-5">
                <p:selectOneMenu id="domainSelect"
                                 value="#{newConceptMBean.basicTypeValue.value}"
                                 var="value1"
                                 converter="omnifaces.SelectItemsConverter"
                                 rendered="#{cc.attrs.targetDefinition.domainType}">
                    <p:ajax update="conceptSavetbl" listener="#{newConceptMBean.setRelationship(cc.attrs.relationshipDefinition,newConceptMBean.basicTypeValue)}"/>
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{cc.attrs.targetDefinition.domain}" var="domain"
                                   itemLabel="#{domain}" itemValue="#{domain}"/>
                </p:selectOneMenu>
            </div>
            <p:dataTable id="conceptSavetbl" value="#{cc.attrs.relationshipDefinition.relationships}" var="rel" >
                <p:column headerText="value">
                    <h:outputText value="#{rel.target.value}"/>
                </p:column>
            </p:dataTable>

            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <p:message for="domainSelect" ></p:message>
            </div>
        </div>
    </h:panelGrid>
    <h:panelGrid rendered="#{cc.attrs.multiplicity.upperBoundary == 0}" >
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-12">
                <p:commandButton update="basicTypeValues"
                                 icon="fa fa-plus"
                                 title="Agregar"
                                 actionListener="#{newConceptMBean.addRelationSMTK(cc.attrs.relationshipDefinition,newConceptMBean.basicTypeValue)}">
                </p:commandButton>
            </div>
        </div>
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-6">

                <p:dataTable id="basicTypeValues"
                             var="relationship"
                             value="#{cc.attrs.relationshipDefinition.relationships}"
                             reflow="true">
                    <p:column>
                        <p:selectOneMenu
                                id="menu#{relationship.idRelationship}"
                                value="#{relationship.target.value}"
                                converter="omnifaces.SelectItemsConverter"
                                rendered="#{cc.attrs.targetDefinition.domainType}">
                            <!--p:ajax update=":mainForm" listener="#{newConceptMBean.setRelationship(cc.attrs.relationshipDefinition,relationship)}"/-->
                            <f:selectItem itemLabel="Seleccione" itemValue=""/>
                            <f:selectItems value="#{cc.attrs.targetDefinition.domain}" var="domain"
                                           itemLabel="#{domain}" itemValue="#{domain}"/>
                        </p:selectOneMenu>
                    </p:column>
                    <p:column headerText="Eliminar">
                    </p:column>
                </p:dataTable>
            </div>
        </div>
    </h:panelGrid>
</composite:implementation>
</html>
