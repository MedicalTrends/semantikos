<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui">

<composite:interface>
    <composite:attribute name="relationshipDefinition" type="cl.minsal.semantikos.model.relationships.RelationshipDefinition" />
    <composite:attribute name="targetDefinition" type="cl.minsal.semantikos.model.basictypes.BasicTypeDefinition" />
</composite:interface>
<composite:implementation>
    <p:panel rendered="#{cc.attrs.relationshipDefinition.multiplicity.simple}" widgetVar="panelBasicTypeSimple">

        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-2">
                <p:outputLabel for="basicTypeValue" value="#{cc.attrs.relationshipDefinition.name} (*)"/>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-10">
                <p:selectOneMenu id="basicTypeValue"
                                 value="#{cc.attrs.relationshipDefinition.relationship.target.value}"
                                 var="value1"
                                 converter="omnifaces.SelectItemsConverter"
                                 rendered="#{cc.attrs.targetDefinition.hasDomain}">
                    <f:selectItem itemLabel="Seleccione"
                                  itemValue=""/>
                    <f:selectItems value="#{cc.attrs.targetDefinition.domain}"
                                   var="domain"
                                   itemLabel="#{domain}"
                                   itemValue="#{domain}"/>
                </p:selectOneMenu>
                <p:inputNumber id="basicTypeValue2"
                               value="#{newConceptMBean.basicTypeValue.value}"
                               var="value"
                               minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                               maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                               decimalPlaces="0"
                               decimalSeparator=","
                               thousandSeparator="."
                               rendered="#{cc.attrs.targetDefinition.integer}">
                </p:inputNumber>
                <p:inputNumber id="basicTypeValue3"
                               value="#{newConceptMBean.basicTypeValue.value}"
                               var="value"
                               minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                               maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                               decimalSeparator=","
                               thousandSeparator="."
                               decimalPlaces="2"
                               rendered="#{cc.attrs.targetDefinition.float}">
                </p:inputNumber>
                <p:inputText id="basicTypeValue4"
                             value="#{newConceptMBean.basicTypeValue.value}"
                             var="value"
                             minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                             maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                             rendered="#{cc.attrs.targetDefinition.string}">
                </p:inputText>
                <p:calendar id="basicTypeValue5"
                            value="#{newConceptMBean.basicTypeValue.value}"
                            var="value"
                            showOn="button"
                            mindate="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                            maxdate="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                            rendered="#{cc.attrs.targetDefinition.date}">
                </p:calendar>
            </div>
        </div>
    </p:panel>
    <p:panel id="basicTypeCollection"
             header="#{cc.attrs.relationshipDefinition.name}"
             toggleable="true" toggleSpeed="500"
             closeSpeed="500"
             widgetVar="panelBasicTypeCollection"
             rendered="#{cc.attrs.relationshipDefinition.multiplicity.collection}">
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-12">
                <p:commandButton update="basicTypeValues"
                                 value="Agregar"
                                 style="float: right"
                                 action="#{newConceptMBean.addRelationship(cc.attrs.relationshipDefinition,newConceptMBean.basicTypeValue)}">
                </p:commandButton>
            </div>
        </div>
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-5">
                <p:dataTable id="basicTypeValues"
                             var="relationship"
                             value="#{cc.attrs.relationshipDefinition.relationships}"
                             reflow="true"
                             rowIndexVar="rowId">
                    <p:column style="width:80%">
                        <p:selectOneMenu
                                id="basicValue6"
                                value="#{relationship.target.value}"
                                converter="omnifaces.SelectItemsConverter"
                                rendered="#{cc.attrs.targetDefinition.hasDomain}">
                            <f:selectItem itemLabel="Seleccione" itemValue=""/>
                            <f:selectItems value="#{cc.attrs.targetDefinition.domain}" var="domain"
                                           itemLabel="#{domain}" itemValue="#{domain}"/>
                        </p:selectOneMenu>
                        <p:inputNumber id="basicValue7"
                                       value="#{relationship.target.value}"
                                       var="value"
                                       minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                       maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                       decimalPlaces="0"
                                       rendered="#{cc.attrs.targetDefinition.integer}">
                        </p:inputNumber>
                        <p:inputNumber id="basicValue8"
                                       value="#{relationship.target.value}"
                                       var="value"
                                       minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                       maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                       decimalPlaces="2"
                                       rendered="#{cc.attrs.targetDefinition.float}">
                        </p:inputNumber>
                        <p:inputText id="basicValue9"
                                     value="#{relationship.target.value}"
                                     var="value"
                                     minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                     maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                     rendered="#{cc.attrs.targetDefinition.string}">
                        </p:inputText>
                        <p:calendar id="basicValue10"
                                    value="#{relationship.target.value}"
                                    var="value"
                                    showOn="button"
                                    showButtonPanel="true"
                                    mindate="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                    maxdate="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                    rendered="#{cc.attrs.targetDefinition.date}">
                        </p:calendar>
                    </p:column>
                    <p:column style="width:20%">
                        <div style="text-align: center;">
                            <p:commandButton
                                           icon="fa fa-trash" title="Eliminar"
                                           update="basicTypeValues"
                                           actionListener="#{newConceptMBean.removeRelationship(cc.attrs.relationshipDefinition, relationship)}"
                                           rendered="#{rowId>=cc.attrs.relationshipDefinition.multiplicity.lowerBoundary}"
                            >
                            </p:commandButton>
                            <!--p:commandLink
                            >
                                <h:graphicImage  style="width: 15px; height: 15px"
                                                 name="images/trash_blue_3.png"
                                />
                            </p:commandLink-->
                            <p:outputLabel value="(*)" rendered="#{!(rowId>=cc.attrs.relationshipDefinition.multiplicity.lowerBoundary)}"/>
                        </div>
                    </p:column>
                </p:dataTable>
            </div>
        </div>
    </p:panel>
</composite:implementation>
</html>
