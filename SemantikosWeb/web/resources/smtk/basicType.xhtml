<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui">

<composite:interface componentType="basicTypeBean">
    <composite:attribute name="name" type="java.lang.String" />
    <composite:attribute name="multiplicity" type="cl.minsal.semantikos.model.Multiplicity" />
    <composite:attribute name="targetDefinition" type="cl.minsal.semantikos.model.basictypes.BasicTypeDefinition" />
    <composite:attribute name="target" type="cl.minsal.semantikos.model.basictypes.BasicTypeValue" />
</composite:interface>
<composite:implementation>
    <h:panelGrid rendered="#{cc.attrs.multiplicity.upperBoundary == 1}" >
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-2">
                <p:outputLabel for="domainSelect" value="#{cc.attrs.name}"/>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-5">
                <p:selectOneMenu id="domainSelect"
                                 value="#{cc.attrs.target.value}"
                                 converter="omnifaces.SelectItemsConverter"
                                 rendered="#{cc.attrs.targetDefinition.domainType}">
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{cc.attrs.targetDefinition.domain}" var="domain"
                                   itemLabel="#{domain}" itemValue="#{domain}"/>
                </p:selectOneMenu>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <p:message for="domainSelect" ></p:message>
            </div>
        </div>
    </h:panelGrid>
    <h:panelGrid rendered="#{cc.attrs.multiplicity.upperBoundary == 0}" >
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-12">
                <p:commandButton update="basicTypeDefinitions"
                                 icon="fa fa-plus"
                                 title="Agregar"
                                 actionListener="#{newConceptMBean.addBasicTypeDefinition(cc.attrs.targetDefinition)}">
                </p:commandButton>
            </div>
        </div>
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-6">

                <p:dataTable id="basicTypeDefinitions"
                             var="basicTypeDefinition"
                             value="#{newConceptMBean.basicTypeDefinitions}"
                             reflow="true">
                    <p:column headerText="Nombre">
                        <p:outputLabel value="#{cc.attrs.name}"/>
                    </p:column>
                    <p:column headerText="Valor">
                        <p:selectOneMenu
                                value="#{cc.attrs.target.value}"
                                converter="omnifaces.SelectItemsConverter"
                                rendered="#{cc.attrs.targetDefinition.domainType}">
                            <f:selectItem itemLabel="Seleccione" itemValue=""/>
                            <f:selectItems value="#{cc.attrs.targetDefinition.domain}" var="domain"
                                           itemLabel="#{domain}" itemValue="#{domain}"/>
                        </p:selectOneMenu>
                    </p:column>
                    <p:column headerText="Valor">
                        <p:commandLink actionListener="#{newConceptMBean.removeBasicType(basicTypeDefinition)}" ajax="true"
                                       update="basicTypeDefinitions" immediate="true">
                            <h:graphicImage name="images/trash-.png" style="width: 14px; height: 14px"
                                            icon="trash"/>
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </div>
        </div>
    </h:panelGrid>
</composite:implementation>
</html>
