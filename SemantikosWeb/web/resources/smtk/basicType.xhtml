<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui">

<composite:interface componentType="basicTypeBean">
    <composite:attribute name="relationshipDefinition" type="cl.minsal.semantikos.model.relationships.RelationshipDefinition" />
    <composite:attribute name="multiplicity" type="cl.minsal.semantikos.model.Multiplicity" />
    <composite:attribute name="targetDefinition" type="cl.minsal.semantikos.model.basictypes.BasicTypeDefinition" />
</composite:interface>
<composite:implementation>
    <p:panel rendered="#{cc.attrs.multiplicity.upperBoundary == 1}">
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-2">
                <p:outputLabel for="basicTypeValue" value="#{cc.attrs.relationshipDefinition.name}"/>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-10">
                <p:selectOneMenu id="basicTypeValue"
                                 value="#{newConceptMBean.basicTypeValue.value}"
                                 var="value1"
                                 converter="omnifaces.SelectItemsConverter"
                                 rendered="#{cc.attrs.targetDefinition.hasDomain}">
                        <f:selectItem itemLabel="Seleccione" itemValue=""/>
                        <f:selectItems value="#{cc.attrs.targetDefinition.domain}" var="domain"
                                       itemLabel="#{domain}" itemValue="#{domain}"/>
                </p:selectOneMenu>
                <p:inputNumber id="basicTypeValue2"
                               value="#{newConceptMBean.basicTypeValue.value}"
                               var="value"
                               minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                               maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                               decimalPlaces="0"
                               rendered="#{cc.attrs.targetDefinition.integer}">
                </p:inputNumber>
                <p:inputNumber id="basicTypeValue3"
                               value="#{newConceptMBean.basicTypeValue.value}"
                               var="value"
                               minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                               maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                               decimalPlaces="2"
                               rendered="#{cc.attrs.targetDefinition.float}">
                </p:inputNumber>
                <p:inputText id="basicTypeValue4"
                             value="#{newConceptMBean.basicTypeValue.value}"
                             var="value"
                             minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                             maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                             rendered="#{cc.attrs.targetDefinition.string}">
                </p:inputText>
                <p:calendar id="basicTypeValue5"
                            value="#{newConceptMBean.basicTypeValue.value}"
                            var="value"
                            mindate="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                            maxdate="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                            rendered="#{cc.attrs.targetDefinition.date}">
                </p:calendar>
            </div>
        </div>
    </p:panel>
    <p:panel id="basicType#{cc.attrs.relationshipDefinition.id}" header="#{cc.attrs.relationshipDefinition.name}"
             toggleable="true" toggleSpeed="500"
             closeSpeed="500"
             widgetVar="panel" style="margin-bottom:20px"
             rendered="#{cc.attrs.multiplicity.upperBoundary == 0}">
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-5">

                <p:dataTable id="basicTypeValues"
                             var="relationship"
                             value="#{cc.attrs.relationshipDefinition.relationships}"
                             reflow="true">
                    <p:column style="width:80%">
                        <p:selectOneMenu
                                id="basicValue6"
                                value="#{relationship.target.value}"
                                converter="omnifaces.SelectItemsConverter"
                                rendered="#{cc.attrs.targetDefinition.hasDomain}">
                            <f:selectItem itemLabel="Seleccione" itemValue=""/>
                            <f:selectItems value="#{cc.attrs.targetDefinition.domain}" var="domain"
                                           itemLabel="#{domain}" itemValue="#{domain}"/>
                        </p:selectOneMenu>
                        <p:inputNumber id="basicValue7"
                                       value="#{relationship.target.value}"
                                       var="value"
                                       minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                       maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                       decimalPlaces="0"
                                       rendered="#{cc.attrs.targetDefinition.integer}">
                        </p:inputNumber>
                        <p:inputNumber id="basicValue8"
                                       value="#{relationship.target.value}"
                                       var="value"
                                       minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                       maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                       decimalPlaces="2"
                                       rendered="#{cc.attrs.targetDefinition.float}">
                        </p:inputNumber>
                        <p:inputText id="basicValue9"
                                     value="#{relationship.target.value}"
                                     var="value"
                                     minValue="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                     maxValue="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                     rendered="#{cc.attrs.targetDefinition.string}">
                        </p:inputText>
                        <p:calendar id="basicValue10"
                                    value="#{relationship.target.value}"
                                    var="value"
                                    mindate="#{cc.attrs.targetDefinition.interval.lowerBoundary}"
                                    maxdate="#{cc.attrs.targetDefinition.interval.upperBoundary}"
                                    rendered="#{cc.attrs.targetDefinition.date}">
                        </p:calendar>
                    </p:column>
                    <p:column headerText="Eliminar" style="width:20%">
                        <p:commandButton icon="fa fa-trash" title="Eliminar"
                                         actionListener="#{newConceptMBean.removeRelationship(cc.attrs.relationshipDefinition, relationship)}"
                                         update="basicTypeValues">
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </div>
        </div>
        <f:facet name="actions">
            <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default"
                           update="basicTypeValues"
                           title="Agregar"
                           actionListener="#{newConceptMBean.addRelationship(cc.attrs.relationshipDefinition,newConceptMBean.basicTypeValue)}">
                <h:outputText styleClass="ui-icon ui-icon-plusthick" />
            </p:commandLink>
            <!--p:commandButton update="basicTypeValues"
                             value="Agregar"
                             styleClass="ui-btn-warning"
                             style="float: right"
                             actionListener="#{newConceptMBean.addRelationship(cc.attrs.relationshipDefinition,newConceptMBean.basicTypeValue)}">
            </p:commandButton-->
        </f:facet>
    </p:panel>
</composite:implementation>
</html>
