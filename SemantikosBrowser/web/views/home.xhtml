<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template/template.xhtml">

    <ui:define name="content">
        <div class="Container100">
            <div class="ContainerIndent">
                <div style="margin-top: 65px"  class="Card ShadowEffect TexAlCenter">
                    <h:form>
                        <div class="ui-grid-responsive">
                            <div class="ui-grid-col-5">
                                <p:inputText  value="#{navBrowser.pattern}"  style="width: 90%; margin: 10px;" placeholder="Buscar...">
                                    <p:ajax event="keyup" update="conceptTable" />
                                </p:inputText>
                            </div>

                            <div class="ui-grid-col-4">
                                <p:selectCheckboxMenu style="width: 100%; margin: 10px;" id="menu"
                                                      value="#{navBrowser.selectedCategories}" label="Categorías"
                                                      filter="true" filterMatchMode="startsWith">
                                    <f:selectItems  value="#{navBrowser.categories}" var="category" itemLabel="#{category.nombre}" itemValue="#{category.idCategory}" />

                                    <p:ajax event="toggleSelect" update="conceptTable" />
                                    <p:ajax update="conceptTable" />
                                </p:selectCheckboxMenu>
                            </div>
                        </div>
                        <div class="ui-grid-responsive">
                            <div class="ui-grid-col-12">

                                <p:dataTable id="conceptTable" value="#{navBrowser.concepts}" var="conceptSMTK" rows="15" paginator="true" lazy="true" dynamic="true">


                                    <p:column style="width:16px" exportable="false">
                                        <p:rowToggler/>
                                    </p:column>

                                    <p:column headerText="Concept ID">
                                        <h:outputText value="#{conceptSMTK.id}"/>
                                    </p:column>

                                    <p:column headerText="Termino">
                                        <h:outputText value="#{conceptSMTK.descriptionFavorite.term}"/>
                                    </p:column>

                                    <p:column headerText="Categoría">
                                        <h:outputText value="#{conceptSMTK.category.nombre}"/>
                                    </p:column>

                                    <p:rowExpansion id="tbl">

                                        <div class="ui-grid-responsive">
                                        <div class="ui-grid-col-4">

                                        <h:outputText value="&lt;br/&gt;" escape="false"/>
                                        <p:panelGrid id="tbl2" columns="2" columnClasses="label,value">
                                            <f:facet name="header">
                                                Información del concepto:
                                            </f:facet>
                                            <h:outputText value="Categoría:"/>
                                            <h:outputText value="#{conceptSMTK.category.nombre}"/>

                                            <h:outputText value="Id:"/>
                                            <h:outputText value="#{conceptSMTK.id}" />

                                            <h:outputText value="Completamente definido:"/>
                                            <h:outputText value="#{navBrowser.conceptSMTK.fullyDefined}"/>

                                            <h:outputText value="Estado:"/>
                                            <h:outputText />

                                        </p:panelGrid>
                                        </div>
                                        <div class="ui-grid-col-1">
                                            <br></br>
                                        </div>
                                        <div class="ui-grid-col-7">
                                        <h:outputText value="&lt;br/&gt;" escape="false"/>
                                        <p:dataList  value="#{conceptSMTK.descriptions}"  var="description" type="ordered">
                                            <f:facet name="header">
                                                Descripciones:
                                            </f:facet>
                                            #{description.term}, #{description.descriptionType.glosa}
                                        </p:dataList>
                                        </div>
                                        </div>

                                    </p:rowExpansion>

                                </p:dataTable>
                            </div>


                        </div>
                        <h:commandButton value="Excel de los conceptos">
                            <p:dataExporter type="xls" target="conceptTable" fileName="conceptos" />
                        </h:commandButton>



                    </h:form>
                </div>
            </div>
        </div>

    </ui:define>

</ui:composition>